\documentclass{bredelebeamer}

\usepackage{minted}
\usepackage{listings}
\usepackage{svg}
\usepackage{environ}

\title[Train planning in OSRD]{Automated short-term train planning in OSRD: from POC to production}
\subtitle{}
\author{Eloi Charpentier - SNCF RÃ©seau}
\date{}

\subject{Train planning in OSRD}

\begin{document}

\begin{frame}
  \titlepage
\end{frame}


\begin{frame}{OSRD (Open-Source Railway Designer)}
	\begin{itemize}
		\item OSRD is an open-source project that can be used to \textbf{edit railway infrastructures} and \textbf{run simulations}.
		\item We'll talk about one of its many features:\\ train planning
	\end{itemize}
	\begin{center}
		\includesvg[height=30px]{img/svg/logos/osrd_small}
		\includesvg[height=40px]{img/svg/logos/sncf-reseau}
		\vspace{0.5cm}\\
		\includesvg[height=30px]{img/svg/logos/rust}
		\includesvg[height=30px]{img/svg/logos/kotlin}
		\includesvg[height=30px]{img/svg/logos/typescript}
	\end{center}
\end{frame}

\section{Problem presentation}
	\begin{frame}{Problem presentation}
		\begin{block}{}
			A train wants to go from Station A to Station B, leaving tomorrow.
			We're the railway operator and need to find a way.
		\end{block}
		\vspace{1cm}
		\includesvg[width=\textwidth]{img/svg/examples/1}
	\end{frame}
	
	\begin{frame}{Problem presentation}
		\begin{block}{}
			But many trains have already been scheduled!
		\end{block}
		\vspace{1cm}
		\includesvg[width=\textwidth]{img/svg/examples/2}
	\end{frame}
	
	\begin{frame}{The rules}
		We cannot:
		\begin{itemize}
			\item Delay scheduled trains
			\item Provide a non-realistic path
		\end{itemize}
		We can:
		\begin{itemize}
			\item Add \textbf{detours}
			\item Slow down the new train
			\item Change the departure time
			\item Add stops, lengthen planned stops
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Search space}
		\begin{block}{}
			We now have a complex search problem in space and time. On one given path:
		\end{block}
		
		\includegraphics[scale=0.25]{img/png/space-time-chart.png}
	\end{frame}
	

\section{Our solution: the original POC}

	\begin{frame}{Our solution: general principles}
		
		\begin{block}{}
			We evaluate one big \textbf{decision tree}:\\
			we enumerate all possible solutions and run a pathfinding algorithm on that tree (A*).
		\end{block}
		First on space:\\
		TODO: screenshot of an infra, may be schematic
	\end{frame}
	
	\begin{frame}{Our solution: general principles}
		
		Then on top of each path, we evaluate another decision tree with the time:\\
		
		
		\includesvg[width=\textwidth]{img/svg/examples/space-time-chart-decision-tree}
	\end{frame}


\section{Short demo}
	\begin{frame}{Short demo}
		% Recorded demo here: it shows the paths being explored on the map, and a resulting space time chart
	\end{frame}


\section{Deployment and new challenges}
	\begin{frame}{How the new tool fits in the existing processes}
		\begin{block}{}
			People are in charge of answering such requests: timetable planners. The goal is not to replace them but to work with them.
		\end{block}
		TODO: schematic of users / planners / OSRD interactions
	\end{frame}

	\begin{frame}{What this implies}
		\begin{itemize}
			\item OSRD is used as a pre-filtering tool
			\item \textbf{False negatives} end up being more of a concern than false positives
			\item Timetable planners check the outputs carefully: any data issue is clearly visible
		\end{itemize}
	\end{frame}
	
	% If there's extra time:
	% talk about performance issues (heuristic, how to define redundant paths)
	% How to log, visualize, and trust the output
	% Feedbacks from timetable planners: data issues and such



\section{Conclusion}
	\begin{frame}{Questions}
		\Large Any question?
		\normalsize

		\vspace{2cm}

		For more information: \url{https://osrd.fr}\\
		Github: \url{https://github.com/OpenRailAssociation/osrd}\\
		Chat with us: \url{https://matrix.osrd.fr}\\
		Email: \url{contact@osrd.fr}
	\end{frame}

\end{document}
